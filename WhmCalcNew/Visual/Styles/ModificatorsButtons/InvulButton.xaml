<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style x:Key="ComboBoxToggleButton"
           TargetType="{x:Type ToggleButton}">
        <Setter Property="OverridesDefaultStyle"
                Value="true" />
        <Setter Property="IsTabStop"
                Value="false" />
        <Setter Property="Focusable"
                Value="false" />
        <Setter Property="ClickMode"
                Value="Press" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Border Name="Border1"
                            Height="{TemplateBinding Height}"
                            Width="{TemplateBinding Width}"
                            SnapsToDevicePixels="True"
                            BorderBrush="{DynamicResource MainOutlineColor}"
                            Background="{TemplateBinding Background}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="5">
                        <Grid x:Name="Grid1">
                            <Canvas HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                                    Height="57"
                                    Width="60">
                                <Path Fill="{DynamicResource TextMainColor}"
                                      Data="M10.9966 5.92257C10.864 5.39206 11.1608 4.84843 11.6789 4.67339L25.5668 0.00210571V16.5103H27.6453V0.00210571L41.5437 4.68389C42.0618 4.85893 42.3587 5.40256 42.226 5.93306C42.2155 5.97505 41.1238 10.5414 43.4647 13.5331C44.9868 15.4751 47.6741 16.3883 51.4951 16.2519C52.0436 16.2502 52.501 16.6709 52.5448 17.2176C52.5544 17.352 53.0027 23.6393 50.9036 31.3436C49.7548 31.0387 48.5481 30.8763 47.3034 30.8763C39.5714 30.8763 33.3034 37.1443 33.3034 44.8763C33.3034 47.8436 34.2265 50.5953 35.8013 52.8598C33.4306 54.4043 30.7274 55.7606 27.6453 56.8553V43.1777H25.5668V56.8763C-0.816895 47.4799 0.586728 18.8769 0.664401 17.2941C0.66621 17.2573 0.667299 17.2351 0.667299 17.2281C0.711125 16.6813 1.16854 16.2607 1.71703 16.2624H2.45184C5.88444 16.2624 8.33031 15.3491 9.79992 13.5226C12.0988 10.5834 10.9966 5.92257 10.9966 5.92257ZM25.1603 19.9554H19.8828L21.876 25.1053L25.739 20.6263L25.1603 19.9554ZM18.676 20.5555L15.4724 25.6813H20.6598L18.676 20.5555ZM21.1792 27.0233H15.5308L25.8565 39.3627L25.9056 39.2357L21.1792 27.0233ZM32.071 27.0233L27.3447 39.2357L27.3938 39.3627L37.7195 27.0233H32.071ZM34.5742 20.5555L32.5905 25.6813H37.7779L34.5742 20.5555ZM26.6252 21.6537L23.1514 25.6813H30.0989L26.6252 21.6537ZM22.6183 27.0233L26.6252 37.3765L30.632 27.0233H22.6183ZM28.09 19.9554L27.5113 20.6263L31.3744 25.1053L33.3675 19.9554H28.09Z" />
                                <Path Fill="{DynamicResource TextMainColor}"
                                      Data="M59.3034 44.8763C59.3034 51.5037 53.9308 56.8763 47.3034 56.8763C40.676 56.8763 35.3034 51.5037 35.3034 44.8763C35.3034 38.2489 40.676 32.8763 47.3034 32.8763C53.9308 32.8763 59.3034 38.2489 59.3034 44.8763Z" />
                            </Canvas>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <DataTrigger Binding="{Binding IsPressed, RelativeSource={RelativeSource Mode=Self}}"
                                     Value="true">
                            <Setter Property="Background"
                                    TargetName="Border1"
                                    Value="{DynamicResource ComboBoxContentColor}" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Path=SelectedItem.Tag, ElementName=InvulCB}"
                                     Value="Crit3">
                            <Setter Property="Effect"
                                    TargetName="Grid1">
                                <Setter.Value>
                                    <DropShadowEffect Color="{DynamicResource DropShadowColor}"
                                                      ShadowDepth="0"
                                                      Direction="0"
                                                      BlurRadius="5" />
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Path=SelectedItem.Tag, ElementName=InvulCB}"
                                     Value="Crit4">
                            <Setter Property="Effect"
                                    TargetName="Grid1">
                                <Setter.Value>
                                    <DropShadowEffect Color="{DynamicResource DropShadowColor}"
                                                      ShadowDepth="0"
                                                      Direction="0"
                                                      BlurRadius="5" />
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Path=SelectedItem.Tag, ElementName=InvulCB}"
                                     Value="Crit5">
                            <Setter Property="Effect"
                                    TargetName="Grid1">
                                <Setter.Value>
                                    <DropShadowEffect Color="{DynamicResource DropShadowColor}"
                                                      ShadowDepth="0"
                                                      Direction="0"
                                                      BlurRadius="5" />
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <ControlTemplate x:Key="InvulCB"
                     TargetType="{x:Type ComboBox}">
        <Grid x:Name="templateRoot"
              SnapsToDevicePixels="true">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}"
                                  Width="0" />
            </Grid.ColumnDefinitions>
            <Popup x:Name="PART_Popup"
                   AllowsTransparency="true"
                   Grid.ColumnSpan="2"
                   IsOpen="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                   Margin="1"
                   Placement="Bottom"
                   PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}">
                <Border x:Name="dropDownBorder"
                        CornerRadius="5"
                        Background="{DynamicResource BoxesInnerColor}"
                        BorderBrush="{DynamicResource MainOutlineColor}"
                        BorderThickness="1">
                    <ScrollViewer x:Name="DropDownScrollViewer"
                                  Margin="4 6 4 6">
                        <StackPanel x:Name="ItemsPresenter"
                                    IsItemsHost="True"
                                    KeyboardNavigation.DirectionalNavigation="Contained"
                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                    </ScrollViewer>
                </Border>
            </Popup>
            <ToggleButton x:Name="toggleButton"
                          Background="{DynamicResource MainWindowBackgroundColor}"
                          BorderBrush="{TemplateBinding BorderBrush}"
                          BorderThickness="1"
                          Grid.ColumnSpan="2"
                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                          Style="{StaticResource ComboBoxToggleButton}" />
            <ContentPresenter x:Name="contentPresenter"
                              ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}"
                              ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                              Content="{TemplateBinding SelectionBoxItem}"
                              ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                              HorizontalAlignment="Left"
                              IsHitTestVisible="false"
                              TextElement.Foreground="{DynamicResource MainWindowBackgroundColor}"
                              TextElement.FontSize="22"
                              TextElement.FontWeight="Bold"
                              Margin="10 0 0 5"
                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                              VerticalAlignment="Bottom" />
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="HasItems"
                     Value="false">
                <Setter Property="Height"
                        TargetName="dropDownBorder"
                        Value="95" />
            </Trigger>
            <DataTrigger Binding="{Binding Path=SelectedItem.Tag, ElementName=InvulCB}"
                         Value="Cancel">
                <Setter Property="Background"
                        TargetName="toggleButton"
                        Value="{DynamicResource MainWindowBackgroundColor}" />
                <Setter Property="Visibility"
                        TargetName="contentPresenter"
                        Value="Hidden" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=SelectedItem.Tag, ElementName=InvulCB}"
                         Value="Add3">
                <Setter Property="Background"
                        TargetName="toggleButton"
                        Value="{DynamicResource BoxesInnerColor}" />
                <Setter Property="BorderThickness"
                        TargetName="toggleButton"
                        Value="2" />
                <Setter Property="Effect"
                        TargetName="contentPresenter">
                    <Setter.Value>
                        <DropShadowEffect Color="{DynamicResource DropShadowColor}"
                                          ShadowDepth="0"
                                          Direction="0"
                                          BlurRadius="5" />
                    </Setter.Value>
                </Setter>
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=SelectedItem.Tag, ElementName=InvulCB}"
                         Value="Add2">
                <Setter Property="Background"
                        TargetName="toggleButton"
                        Value="{DynamicResource BoxesInnerColor}" />
                <Setter Property="BorderThickness"
                        TargetName="toggleButton"
                        Value="2" />
                <Setter Property="Effect"
                        TargetName="contentPresenter">
                    <Setter.Value>
                        <DropShadowEffect Color="{DynamicResource DropShadowColor}"
                                          ShadowDepth="0"
                                          Direction="0"
                                          BlurRadius="5" />
                    </Setter.Value>
                </Setter>
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=SelectedItem.Tag, ElementName=InvulCB}"
                         Value="Add1">
                <Setter Property="Background"
                        TargetName="toggleButton"
                        Value="{DynamicResource BoxesInnerColor}" />
                <Setter Property="BorderThickness"
                        TargetName="toggleButton"
                        Value="2" />
                <Setter Property="Effect"
                        TargetName="contentPresenter">
                    <Setter.Value>
                        <DropShadowEffect Color="{DynamicResource DropShadowColor}"
                                          ShadowDepth="0"
                                          Direction="0"
                                          BlurRadius="5" />
                    </Setter.Value>
                </Setter>
            </DataTrigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>



    <Style x:Key="{x:Type ComboBoxItem}"
           TargetType="{x:Type ComboBoxItem}">
        <Setter Property="SnapsToDevicePixels"
                Value="true" />
        <Setter Property="Foreground"
                Value="{DynamicResource TextMainColor}" />
        <Setter Property="OverridesDefaultStyle"
                Value="true" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                    <Border Name="Border"
                            Padding="2"
                            CornerRadius="5"
                            SnapsToDevicePixels="true">
                        <ContentPresenter />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsHighlighted"
                                 Value="true">
                            <Setter TargetName="Border"
                                    Property="Background"
                                    Value="{DynamicResource ComboBoxContentColor}" />
                        </Trigger>
                        <Trigger Property="IsEnabled"
                                 Value="false">
                            <Setter Property="Foreground"
                                    Value="#888888" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>